using System;
using System.Collections.Generic;
using System.Drawing;
using System.Text;

namespace Maticsoft.BLL.ScanPortImage
{
    public abstract class ImageDataBlock
    {
        /// <summary>
        /// 赛事编号
        /// </summary>
        protected const int[] raceNO = new int[] { 500,400,200,100,50,40,20,10,5,4,2,1};
        /// <summary>
        /// 倍数编号
        /// </summary>
        protected const int[] multipleNO = new int[] {50,40,30,20,10,9,8,7,6,5,4,3,2,1 };

        /// <summary>
        /// 该数据块的起始位置
        /// </summary>
        protected Point startPoint;

        /// <summary>
        /// 根据传入的数据，得到需要描的几个点的起始坐标
        /// </summary>
        /// <param name="data"></param>
        /// <returns></returns>
        public abstract List<Point> getPointArrayByData(String data);

        /// <summary>
        /// 取竞彩赛事的点
        /// </summary>
        /// <param name="race"></param>
        /// <param name="startPoint"></param>
        /// <returns></returns>
        public void getSMGRacePoints(List<Point> plist, String race, Point startPoint)
        {
            //第一步：取字符串前8位，算出是周几（20160506）
            int week = 7;            
            //第二步：取周几的点
            plist.Add(new Point(startPoint.X + ((int)(week % 4 - 0.5)) * SPImageGlobal.S2S_WIDTH,
                startPoint.Y + (int)((Math.Ceiling(week/4d)+0.5)*SPImageGlobal.BB_HIGH)-SPImageGlobal.SMALL_BB_HIGH/2));
            //第三步：取对阵的点
            int racenum = 301;
            while (racenum>0)
            {
                for (int i = raceNO.Length; i > 0; i--)
                {
                    if (raceNO[i-1] <= racenum)
                    {
                        plist.Add(new Point(startPoint.X + ((int)(week % 4 - 0.5)) * SPImageGlobal.S2S_WIDTH,
                startPoint.Y + (int)((Math.Ceiling(week/4d)+2.5)*SPImageGlobal.BB_HIGH)-SPImageGlobal.SMALL_BB_HIGH/2));
                        racenum -= raceNO[i];
                        break;
                    }
                }
            }
        }
    }
}
